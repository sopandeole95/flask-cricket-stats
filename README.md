# Flask Cricket Stats Manager

A simple Flask application to upload, store, and visualize cricket match statistics using CSV uploads, a SQLite database, and Chart.js.

## Features

* **CSV Upload**: Import match and player performance data via CSV.
* **Database Schema**: Tracks teams, players, matches, and performance metrics.
* **Web Views**:

  * `/upload`: Upload page for CSV files.
  * `/matches`: List imported matches in an HTML table.
  * `/batting`: Bar chart showing total runs by player.
  * `/bowling`: Bar chart showing total wickets by player.
* **API Endpoints**:

  * `/api/performances?metric=runs|wickets`: JSON aggregation of runs or wickets by player.
* **Testing**: pytest suite with ≥80% coverage.

## Requirements

* Python 3.8+ (tested on 3.12)
* pip

## Installation

1. **Clone the repository**

   ```bash
   git clone https://github.com/your-username/flask-cricket-stats.git
   cd flask-cricket-stats
   ```

2. **Create and activate a virtual environment**

   ```bash
   python3 -m venv venv
   source venv/bin/activate       # On Windows: venv\Scripts\activate
   ```

3. **Install dependencies**

   ```bash
   pip install -r requirements.txt
   ```

## Configuration

* The default database is SQLite, stored as `cricket_stats.db` in the project root.
* To change database, set the `DATABASE_URL` environment variable.
* For development, you can set:

  ```bash
  export FLASK_APP=run.py
  export FLASK_ENV=development
  export SECRET_KEY="a-strong-random-value"
  ```

## Usage

1. **Initialize the database** (if not auto-run on startup):

   ```bash
   flask init-db
   ```

2. **Start the Flask server**:

   ```bash
   flask run
   ```

3. **Access the app**:

   * Upload CSV: [http://localhost:5000/upload](http://localhost:5000/upload)
   * View matches: [http://localhost:5000/matches](http://localhost:5000/matches)
   * View batting chart: [http://localhost:5000/batting](http://localhost:5000/batting)
   * View bowling chart: [http://localhost:5000/bowling](http://localhost:5000/bowling)

## Testing

Run the pytest suite with coverage:

```bash
pytest --cov=app tests/
```

Ensure coverage is ≥80%.

## Contributing

1. Fork the repository.
2. Create a feature branch: `git checkout -b feature/YourFeature`.
3. Commit your changes: `git commit -m "Add YourFeature"`.
4. Push to your branch: `git push origin feature/YourFeature`.
5. Open a pull request.

## License

MIT License

---

*Generated by Flask Cricket Stats Manager tooling.*
